---
layout: post
title: Factory design
tagline: " pattern in Python3"
permalink: /python3/design/patterns/creational/factory.html
categories: [literate programming, emacs, Python3]
tags: [OOP, design, patterns, creational, factory]
---

<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org6f224be">Pattern overview</a>
<ul>
<li><a href="#org6e81eaa">Pattern Name and Classification:</a></li>
<li><a href="#org27debb6">Intent:</a></li>
<li><a href="#orgc9ed680">Also Known As:</a></li>
<li><a href="#org8b242ba">Motivation (Forces):</a></li>
<li><a href="#orgfa9d38a">Applicability:</a></li>
<li><a href="#orgce8c3d1">Structure:</a></li>
<li><a href="#org5550f24">Participants:</a></li>
<li><a href="#org2d0b48c">Collaboration:</a></li>
<li><a href="#org043f524">Consequences:</a></li>
<li><a href="#org224605b">Implementation:</a></li>
<li><a href="#orgb965c37">Known Uses:</a></li>
<li><a href="#org63c30fa">Related Patterns:</a></li>
</ul>
</li>
<li><a href="#org5cdcd34">Samples</a>
<ul>
<li><a href="#org238bbb1">Pet factory</a></li>
<li><a href="#org33652c6">Weapon factory</a></li>
<li><a href="#org488e363">Pizza factory</a></li>
</ul>
</li>
</ul>
</div>
</div>
<p>
Hope <a href="https://github.com/0--key/pydepatt/tree/master/patterns/creational/factory">this page</a> could elucidate the same issue in a bit different
manner.
</p>

<div id="outline-container-org6f224be" class="outline-2">
<h2 id="org6f224be">Pattern overview</h2>
<div class="outline-text-2" id="text-org6f224be">
</div><div id="outline-container-org6e81eaa" class="outline-3">
<h3 id="org6e81eaa">Pattern Name and Classification:</h3>
<div class="outline-text-3" id="text-org6e81eaa">
<p>
A descriptive and unique name that helps in identifying and
referring to the pattern.
</p>
</div>
</div>
<div id="outline-container-org27debb6" class="outline-3">
<h3 id="org27debb6">Intent:</h3>
<div class="outline-text-3" id="text-org27debb6">
<p>
A description of the goal behind the pattern and the reason for
using it.
</p>
</div>
</div>
<div id="outline-container-orgc9ed680" class="outline-3">
<h3 id="orgc9ed680">Also Known As:</h3>
<div class="outline-text-3" id="text-orgc9ed680">
<p>
Other names for the pattern.
</p>
</div>
</div>
<div id="outline-container-org8b242ba" class="outline-3">
<h3 id="org8b242ba">Motivation (Forces):</h3>
<div class="outline-text-3" id="text-org8b242ba">
<p>
A scenario consisting of a problem and a context in which this
pattern can be used.
</p>
</div>
</div>
<div id="outline-container-orgfa9d38a" class="outline-3">
<h3 id="orgfa9d38a">Applicability:</h3>
<div class="outline-text-3" id="text-orgfa9d38a">
<p>
Situations in which this pattern is usable; the context for the
pattern.
</p>
</div>
</div>
<div id="outline-container-orgce8c3d1" class="outline-3">
<h3 id="orgce8c3d1">Structure:</h3>
<div class="outline-text-3" id="text-orgce8c3d1">
<p>
A graphical representation of the pattern. Class diagrams and
Interaction diagrams may be used for this purpose.
</p>
</div>
</div>
<div id="outline-container-org5550f24" class="outline-3">
<h3 id="org5550f24">Participants:</h3>
<div class="outline-text-3" id="text-org5550f24">
<p>
A listing of the classes and objects used in the pattern and their
roles in the design.
</p>
</div>
</div>
<div id="outline-container-org2d0b48c" class="outline-3">
<h3 id="org2d0b48c">Collaboration:</h3>
<div class="outline-text-3" id="text-org2d0b48c">
<p>
A description of how classes and objects used in the pattern
interact with each other.
</p>
</div>
</div>
<div id="outline-container-org043f524" class="outline-3">
<h3 id="org043f524">Consequences:</h3>
<div class="outline-text-3" id="text-org043f524">
<p>
A description of the results, side effects, and trade offs caused
by using the pattern.
</p>
</div>
</div>
<div id="outline-container-org224605b" class="outline-3">
<h3 id="org224605b">Implementation:</h3>
<div class="outline-text-3" id="text-org224605b">
<p>
A description of an implementation of the pattern; the solution
part of the pattern.
</p>
</div>
</div>
<div id="outline-container-orgb965c37" class="outline-3">
<h3 id="orgb965c37">Known Uses:</h3>
<div class="outline-text-3" id="text-orgb965c37">
<p>
Examples of real usages of the pattern.
</p>
</div>
</div>
<div id="outline-container-org63c30fa" class="outline-3">
<h3 id="org63c30fa">Related Patterns:</h3>
<div class="outline-text-3" id="text-org63c30fa">
<p>
Other patterns that have some relationship with the pattern;
discussion of the differences between the pattern and similar
patterns.
</p>
</div>
</div>
</div>



<div id="outline-container-org5cdcd34" class="outline-2">
<h2 id="org5cdcd34">Samples</h2>
<div class="outline-text-2" id="text-org5cdcd34">
<p>
For educational purposes it is convenient to look at the working
sample.
</p>
</div>

<div id="outline-container-org238bbb1" class="outline-3">
<h3 id="org238bbb1">Pet factory</h3>
<div class="outline-text-3" id="text-org238bbb1">
<p>
Creates some particular animal out from arbitrary number already
defined pets.
</p>

<table><tbody><tr><th>Pattern code</th>
<th>Test suite</th></tr><tr><td valign="top">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #00fa9a; background-color: #000000;">#</span><span style="color: #00fa9a; background-color: #000000;">!/usr/bin/env python</span>
<span style="color: #00fa9a; background-color: #000000;"># </span><span style="color: #00fa9a; background-color: #000000;">-*- coding: utf-8 -*-</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #2e8b57; background-color: #000000;">A pet factory abstraction</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">Dog</span>(<span style="color: #54ff9f;">object</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #2e8b57; background-color: #000000;">"""A simple dog class"""</span>

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">__init__</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>, name):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>._name = name

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">speak</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">return</span> <span style="color: #2e8b57; background-color: #000000;">"Woof!"</span>


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">Cat</span>(<span style="color: #54ff9f;">object</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #2e8b57; background-color: #000000;">"""A simple cat class"""</span>

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">__init__</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>, name):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>._name = name

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">speak</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">return</span> <span style="color: #2e8b57; background-color: #000000;">"Meow!"</span>


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">spawn_pet</span>(pet=<span style="color: #2e8b57; background-color: #000000;">"dog"</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #2e8b57; background-color: #000000;">"""The factory method"""</span>
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">pets</span> = <span style="color: #54ff9f;">dict</span>(dog=Dog(<span style="color: #2e8b57; background-color: #000000;">"Hope"</span>),
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   cat=Cat(<span style="color: #2e8b57; background-color: #000000;">"Peace"</span>))
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">return</span> pets[pet]

<span style="color: #ee82ee;">d</span> = spawn_pet(<span style="color: #2e8b57; background-color: #000000;">"dog"</span>)
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">print</span>(d.speak())
<span style="color: #ee82ee;">c</span> = spawn_pet(<span style="color: #2e8b57; background-color: #000000;">"cat"</span>)
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">print</span>(c.speak())
</pre>
</div>

<pre class="example">
Woof!
Meow!
</pre>
</td><td valign="top">
<div class="org-src-container">
<pre class="src src-python"><span style="color: #00fa9a; background-color: #000000;">#</span><span style="color: #00fa9a; background-color: #000000;">!/usr/bin/env python</span>
<span style="color: #00fa9a; background-color: #000000;"># </span><span style="color: #00fa9a; background-color: #000000;">-*- coding: utf-8 -*-</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #2e8b57; background-color: #000000;">An attempt to illustrate how pet_factory works</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">import</span> unittest
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">from</span> pet_factory <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">import</span> Dog, Cat, spawn_pet


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">TestPetBehavior</span>(unittest.TestCase):

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">setUp</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>.D = Dog(<span style="color: #2e8b57; background-color: #000000;">'Hound'</span>)

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">test_dog_init_name</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>.assertEqual(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>.D._name, <span style="color: #2e8b57; background-color: #000000;">'Hound'</span>)

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">test_dog_speak_ability</span>(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>.assertEqual(<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">self</span>.D.speak(), <span style="color: #2e8b57; background-color: #000000;">'Woof!'</span>)
</pre>
</div>

</td></tr></tbody></table>
</div>
</div>

<div id="outline-container-org33652c6" class="outline-3">
<h3 id="org33652c6">Weapon factory</h3>
<div class="outline-text-3" id="text-org33652c6">
<table><tbody><tr><th>Pattern code</th>
<th>Test suite</th></tr><tr><td valign="top">

<div class="org-src-container">
<pre class="src src-python"><span style="color: #00fa9a; background-color: #000000;">#</span><span style="color: #00fa9a; background-color: #000000;">!/usr/bin/env python</span>
<span style="color: #00fa9a; background-color: #000000;"># </span><span style="color: #00fa9a; background-color: #000000;">-*- coding: utf-8 -*-</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #2e8b57; background-color: #000000;">How to choose an arbitrary weapon</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">from</span> random <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">import</span> randrange


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">Weapon</span>(<span style="color: #54ff9f;">object</span>):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">name</span> = <span style="color: #0000ff;">None</span>
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">cost</span> = <span style="color: #0000ff;">None</span>

<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ffff00;">@staticmethod</span>
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">def</span> <span style="color: #00CC00; background-color: #000000; font-weight: bold;">get_weapon</span>(x):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">if</span> x == 0:
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">return</span> Knife()
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">if</span> x == 1:
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">return</span> Gun()


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">Knife</span>(Weapon):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">name</span> = <span style="color: #2e8b57; background-color: #000000;">'Knife'</span>
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">cost</span> = 20.00


<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">class</span> <span style="color: #ffff00;">Gun</span>(Weapon):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">name</span> = <span style="color: #2e8b57; background-color: #000000;">'Gun'</span>
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">cost</span> = 300.00


<span style="color: #00fa9a; background-color: #000000;"># </span><span style="color: #00fa9a; background-color: #000000;">Create 5 random weapons</span>
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">for</span> _ <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">in</span> <span style="color: #54ff9f;">range</span>(5):
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #ee82ee;">w</span> = Weapon.get_weapon(randrange(2))
<span style="color: #00CC00; background-color: #151515;"> </span>   <span style="color: #00ff00; background-color: #000000; text-decoration: underline;">print</span>(w.name, w.cost)
</pre>
</div>

<pre class="example">
Knife 20.0
Gun 300.0
Gun 300.0
Gun 300.0
Knife 20.0
</pre>

</td><td valign="top">

<div class="org-src-container">
<pre class="src src-python"><span style="color: #00fa9a; background-color: #000000;">#</span><span style="color: #00fa9a; background-color: #000000;">!/usr/bin/env python</span>
<span style="color: #00fa9a; background-color: #000000;"># </span><span style="color: #00fa9a; background-color: #000000;">-*- coding: utf-8 -*-</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #2e8b57; background-color: #000000;">An attempt to illustrate how sample_code works</span>
<span style="color: #2e8b57; background-color: #000000;">"""</span>
<span style="color: #00ff00; background-color: #000000; text-decoration: underline;">import</span> unittest
</pre>
</div>

</td></tr></tbody></table>
</div>
</div>

<div id="outline-container-org488e363" class="outline-3">
<h3 id="org488e363">Pizza factory</h3>
</div>
</div>
