---
layout: post
title: Testing Python standard library
tagline: " and learning through play approach"
permalink: /python/tdd/unittest_init.html
categories: [python, stdlib, TDD, literate programming]
tags: [tutorial, unittest, methodology]
---
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#orgheadline1">Preamble</a></li>
<li><a href="#orgheadline2">Methodology</a>
<ul>
<li><a href="#orgheadline3">Template</a></li>
<li><a href="#orgheadline4">Necessary imports</a></li>
<li><a href="#orgheadline5">Test suits</a></li>
<li><a href="#orgheadline6">Test runner</a></li>
</ul>
</li>
<li><a href="#orgheadline7">Conclusion</a></li>
</ul>
</div>
</div>

<div id="outline-container-orgheadline1" class="outline-2">
<h2 id="orgheadline1">Preamble</h2>
<div class="outline-text-2" id="text-orgheadline1">
<p>
In most cases the best approach to study how something works is to
test its behavior in various circumstances. In a helicopter view it
is a dissection or a scrutiny.
</p>

<p>
The same approach for studying programming language has a plethora
benefits and the most significant is that it take you chance to play
with code. Of cause studying by playing is a most natural way of
learning.
</p>
</div>
</div>

<div id="outline-container-orgheadline2" class="outline-2">
<h2 id="orgheadline2">Methodology</h2>
<div class="outline-text-2" id="text-orgheadline2">
</div><div id="outline-container-orgheadline3" class="outline-3">
<h3 id="orgheadline3">Template</h3>
<div class="outline-text-3" id="text-orgheadline3">
<p>
Lets create a mold for pouring by the test suits:
</p>

<div class="org-src-container">

<pre class="src src-org"><span style="color: #ff0087;">#+BEGIN_SRC python :noweb yes :results none :tangle tests/test_built-in_constants.py</span>
<span style="color: #00cdcd;">"""Discover how it works by a coherent testing"""</span>
&lt;&lt;<span style="color: #cd0000;">import</span>-header&gt;&gt;


&lt;&lt;built-<span style="color: #cd0000;">in</span>-constants-test&gt;&gt;
<span style="color: #ff0087;"># </span><span style="color: #ff0087;">it might be several test cases</span>
<span style="color: #ff0087;"># </span><span style="color: #ff0087;">thus several test classes</span>
<span style="color: #ff0087;"># </span><span style="color: #ff0087;">as several include source code block</span>
<span style="color: #ff0087;">#+END_SRC</span>
</pre>
</div>

<blockquote>
<p>
<b>Tip</b> Use <code>C-c C-v t</code> to generate <i>(tangle)</i> the test file
</p>
</blockquote>
</div>
</div>

<div id="outline-container-orgheadline4" class="outline-3">
<h3 id="orgheadline4">Necessary imports</h3>
<div class="outline-text-3" id="text-orgheadline4">
<p>
It's clear what you expected to test by means the <code>unittest</code> module:
</p>

<div class="org-src-container">

<pre class="src src-org"><span style="color: #ff0087;">#+NAME: import-header</span>
<span style="color: #ff0087;">#+BEGIN_SRC python</span>
<span style="color: #cd0000;">import</span> unittest
<span style="color: #ff0087;">#+END_SRC</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgheadline5" class="outline-3">
<h3 id="orgheadline5">Test suits</h3>
<div class="outline-text-3" id="text-orgheadline5">
<p>
Each test case class as a separate source code block with a
particular name for substitution into template.
</p>

<div class="org-src-container">

<pre class="src src-org"><span style="color: #ff0087;">#+NAME: built-in-constants-test</span>
<span style="color: #ff0087;">#+BEGIN_SRC python</span>
  <span style="color: #cd0000;">class</span> <span style="color: #cdcd00;">TestBuiltInConstants</span>(unittest.TestCase):

      <span style="color: #cd0000;">def</span> <span style="color: #af00ff;">test_true</span>(<span style="color: #cd0000;">self</span>):
          <span style="color: #cd0000;">self</span>.assertTrue(1 + 3 == 4)

      <span style="color: #cd0000;">def</span> <span style="color: #af00ff;">test_false</span>(<span style="color: #cd0000;">self</span>):
          <span style="color: #cd0000;">self</span>.assertFalse(1 + 4 == 4)

      <span style="color: #cd0000;">def</span> <span style="color: #af00ff;">test_none</span>(<span style="color: #cd0000;">self</span>):
          <span style="color: #ff87ff;">value</span> = <span style="color: #0000ee;">None</span>
          <span style="color: #cd0000;">self</span>.assertIsNone(value)
<span style="color: #ff0087;">#+END_SRC</span>
</pre>
</div>

<p>
Obviously that arbitrary number of named blocks can exist there.
</p>
</div>
</div>

<div id="outline-container-orgheadline6" class="outline-3">
<h3 id="orgheadline6">Test runner</h3>
<div class="outline-text-3" id="text-orgheadline6">
<p>
Accustomed unittest as Python module:
</p>

<div class="org-src-container">

<pre class="src src-org"><span style="color: #ff0087;">#+BEGIN_SRC sh :results output :exports both</span>
  python -m unittest -v tests/test_built-in_constants.py

<span style="color: #ff0087;">#+END_SRC</span>

<span style="color: #ff0087;">#+RESULTS:</span>
<span style="color: #b2b2b2;">: test_false (tests.test_built-in_constants.TestBuiltInConstants) ... ok</span>
<span style="color: #b2b2b2;">: test_none (tests.test_built-in_constants.TestBuiltInConstants) ... ok</span>
<span style="color: #b2b2b2;">: test_true (tests.test_built-in_constants.TestBuiltInConstants) ... ok</span>
<span style="color: #b2b2b2;">: </span>
<span style="color: #b2b2b2;">: ----------------------------------------------------------------------</span>
<span style="color: #b2b2b2;">: Ran 3 tests in 0.002s</span>
<span style="color: #b2b2b2;">: </span>
<span style="color: #b2b2b2;">: OK</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgheadline7" class="outline-2">
<h2 id="orgheadline7">Conclusion</h2>
<div class="outline-text-2" id="text-orgheadline7">
<p>
Now it is totally clear how to compose tests for Python standard
library testing in a literate programming style.
</p>
</div>
</div>
